<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.png">
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <title>Sketch Labs</title>
  <script src="libs/p5.min.js"></script>
  <script src="libs/victor.min.js"></script>
  <script src="libs/seedrandom.min.js"></script>

  <script type="text/javascript"> 

    var sketches = [
      { id: "fbc39eb8", date: "April 11, 2020" },
      { id: "31569c5b", date: "April 9, 2020" }
    ];

    var currentSketchIndex = -1;

    function getUrlVars() 
    {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
          vars[key] = value;
      });
      return vars;
    }

    function getUrlParam(parameter, defaultvalue)
    {
      var urlparameter = defaultvalue;
      if(window.location.href.indexOf(parameter) > -1)
      {
        urlparameter = getUrlVars()[parameter];
      }
      return urlparameter;
    }

    function onPageLoad()
    {
      if (currentSketchIndex >= 0)
      {
        var sketch = sketches[currentSketchIndex];

        // Update title bar
        document.getElementById("sketchTitle").innerText = sketch.id;
        document.getElementById("sketchDate").innerText = sketch.date;    

        // Prev
        if (currentSketchIndex >= 1)
        {
          document.getElementById("prevA").href = "http://localhost:8080/?sketch=" + sketches[currentSketchIndex-1].id;
        }
        else
        {
          document.getElementById("prevA").href = "#";
        }
          

        // Next
        if (currentSketchIndex < sketches.length-1)
          document.getElementById("nextA").href = "http://localhost:8080/?sketch=" + sketches[currentSketchIndex+1].id;
        else
          document.getElementById("nextA").href = "#";          
      }
    }

    var sketchStr = getUrlParam("sketch", null);

    if (sketchStr != null)
    {
      for (var i=0; i<sketches.length; ++i)
      {
        if (sketches[i].id == sketchStr)
        {
          currentSketchIndex = i;
          break;
        }
      }
    }

    if (currentSketchIndex >= 0)
    {
      var sketch = sketches[currentSketchIndex];

      // Open sketch's js file
      var fileref=document.createElement('script');
      fileref.setAttribute("type","text/javascript");
      fileref.setAttribute("src", "sketches/" + sketch.id + ".js");
      document.head.appendChild(fileref);  
    }
    // else
    // {
    //   for (var i=0; i<sketches.length; ++i)
    //   {
    //     var sketch = sketches[i];

    //     var a=document.createElement('a');
    //     a.setAttribute("href", "sketches/" + sketch.id + ".js");       
    //     a.value = sketch.id;
    //     document.body.appendChild(a);  
    //   }
    // }
  </script>   

  <style>
    body 
    {
      touch-action: none;  
      margin:0px;
      display:block;
      padding: 0px;
    }
    div
    {
      left:0px;
      top:0px;
      width: 100%;
      height: auto;
      background-color: white;
      position: absolute;
      float: top;
      z-index:1000;
      font-family: 'Raleway', sans-serif;
      user-select: none;
      display: flex;      
      align-items: center;
    }
    #sketchTitle
    {      
      font-size: 30px;
      font-weight: 600;
      float: left;
      margin: 8px;
    }
    #sketchDate
    {      
      font-size: 16px;
      font-weight: 500;
      float: left;
      margin-right: 8px;
    }   
    #sketchAuthor
    {      
      font-size: 13px;
      font-weight: 400;
      float: left;
      margin-right: 8px;
    }     
    #sketchNextPrev
    {      
      font-size: 13px;
      font-weight: 400;
      float: right;
      margin-right: 8px;
    }        
  </style>
</head>

<body onload="onPageLoad();">
  <div>
    <span id="sketchTitle">TITLE</span>
    <span id="sketchDate">DATE</span>
    <span id="sketchAuthor">by <a href="http://www.thijskruithof.nl" target="_blank">Thijs Kruithof</a>, source on <a href="https://github.com/thijskruithof/sketches/tree/master/docs/sketches" target="_blank">GitHub</a>.</span>
    <span id="sketchNextPrev"><a id="homeA" href="/">Home</a></span>
    <span id="sketchNextPrev"><a id="prevA" href="#">Prev</a></span>
    <span id="sketchNextPrev"><a id="nextA" href="#">Next</a></span>
  </div>
</body>

</html>